"use strict";(self.webpackChunkwebpack_config=self.webpackChunkwebpack_config||[]).push([[347],{51347:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Y});t(34935);var o=t(71577),l=t(4942),c=t(93433),i=t(15861),s=t(29439),a=(t(16893),t(88108)),r=t(64687),d=t.n(r),u=t(67294),m=t(39711),x=t(96974),v=t(80411),_=t.n(v),h=t(43455),p=t(81237),f=t(67020),I=(t(59892),t(33860)),j=t(19674),g=t(20555),N=t(74317),C=t(14110),k=t(56663);const b={clickNoSelectText:"index__clickNoSelectText--cPLbe",collectionWrap:"index__collectionWrap--X0D8I",collectionHeader:"index__collectionHeader--RkiVK",collectCount:"index__collectCount--Jy0tS",listCount:"index__listCount--K8sAF",count:"index__count--vPLcY",addCollect:"index__addCollect--bK60N",addIcon:"index__addIcon--c_Ql5",collectionItem:"index__collectionItem--Lz9VI",desc:"index__desc--bTrP6",actions:"index__actions--TEZJN",edit:"index__edit--sVK7O",iconWrapClass:"index__iconWrapClass--GPwR7",collectionName:"index__collectionName--t5mSr",lockIcon:"index__lockIcon--LgXXn",collectDesc:"index__collectDesc--csfo0",collectionCount:"index__collectionCount--tNi4I",loading:"index__loading--OJpfe",skeletonWrap:"index__skeletonWrap--bROS3",dark:"index__dark--_NPwR"};var S=t(85893);const Z=function(e){var n=e.list,t=e.collectTotal,l=e.total,c=e.loading,i=e.collectedCount,a=e.visible,r=e.onHide,d=e.onShow,m=e.getAddRes,v=e.delCollection,h=e.updateCollection,p=e.authorId,f=e.itemClass,Z=e.skeletonRows,y=void 0===Z?2:Z,W=e.themeMode,w=e.htmlWidth,A=void 0===w?0:w,O=(0,u.useState)({id:""}),P=(0,s.Z)(O,2),R=P[0],T=P[1],D=(0,x.s0)(),E=(0,j.Z)().userInfoStore.getUserInfo;return(0,S.jsxs)("div",{className:_()(b.collectionWrap,"dark"===W&&b.dark),children:[(null==n?void 0:n.length)>0&&(0,S.jsxs)("div",{className:b.collectionHeader,children:[(0,S.jsxs)("div",{className:b.collectCount,children:[(0,S.jsx)("div",{className:b.listCount,children:"".concat(p===(null==E?void 0:E.userId)?"我":"他","创建的 ").concat(t)}),(0,S.jsx)("div",{className:b.count,children:"".concat(p===(null==E?void 0:E.userId)?"我":"他","收藏的文章 ").concat(i)})]}),(!p||p===(null==E?void 0:E.userId))&&(0,S.jsx)("div",{children:(0,S.jsxs)(o.Z,{type:"link",className:b.addCollect,onClick:function(){return d&&d()},children:[(0,S.jsx)(N.Z,{name:"icon-add",className:b.addIcon})," 新建收藏集"]})})]}),null!=n&&n.length?n.map((function(e){var n;return(0,S.jsx)("div",{className:b.collectionItem,onClick:function(){return n=e.id,void D("/collection/".concat(n,"?authorId=").concat(p||(null==E?void 0:E.userId)));var n},children:(0,S.jsxs)("div",{className:b.desc,children:[(0,S.jsxs)("div",{className:b.collectionName,children:[(0,S.jsx)("span",{children:e.name}),2===e.status&&(0,S.jsx)(N.Z,{name:"icon-lock-full",className:b.lockIcon})]}),(0,S.jsx)("div",{className:b.collectDesc,children:e.desc}),(0,S.jsxs)("div",{className:b.collectionCount,children:[(0,S.jsxs)("span",{children:[(0,g.p6)(e.createTime,"YYYY-MM-DD"),"更新 · ",null===(n=e.articleIds)||void 0===n?void 0:n.length,"篇文章"]}),(!p||p===(null==E?void 0:E.userId))&&(0,S.jsxs)("div",{className:b.actions,children:[(0,S.jsx)("span",{className:b.edit,children:(0,S.jsx)(N.Z,{name:"icon-icon_bianji",iconWrapClass:b.iconWrapClass,text:"编辑",customStyle:!0,onClick:function(){return function(e){T(e),d&&d()}(e)}})}),(0,S.jsx)("span",{className:b.delete,children:(0,S.jsx)(N.Z,{name:"icon-shanchu",iconWrapClass:b.iconWrapClass,text:"删除",customStyle:!0,onClick:function(){return n=e.id,void(v&&v(n));var n}})})]})]})]})},e.id)})):(0,S.jsx)("div",{className:_()(b.collectionItem,f,b.skeletonWrap),children:(0,S.jsx)(I.Z,{active:!0,title:!0,paragraph:{rows:y}})}),c||l!==(null==n?void 0:n.length)?(0,S.jsx)("div",{className:b.loading,children:"loading..."}):(0,S.jsx)("div",{className:b.loading,children:"共(".concat(null==n?void 0:n.length,")\n      条，空空如也～～～")}),A>906?(0,S.jsx)(C.Z,{visible:!!a,onCancel:function(){return r&&r()},getAddRes:m,updateCollection:h,collectInfo:R,themeMode:W},(null==R?void 0:R.name)||(null==R?void 0:R.desc)||(null==R?void 0:R.status)):(0,S.jsx)(k.Z,{visible:!!a,onCancel:function(){return r&&r()},getAddRes:m,updateCollection:h,collectInfo:R,themeMode:W},(null==R?void 0:R.name)||(null==R?void 0:R.desc)||(null==R?void 0:R.status))]})};var y=t(29191),W=t(10814),w=t(13503),A=t(26260),O=t(95717),P=t(49058),R=t(31660);const T={clickNoSelectText:"index__clickNoSelectText--O573A",removeConfirmStyle:"index__removeConfirmStyle--YuiaF",darkRemoveConfirmStyle:"index__darkRemoveConfirmStyle--AUo7T",Personal:"index__Personal--cLeIX",changeIconWrap:"index__changeIconWrap--fozZg",icon:"index__icon--CQENP",contentWrap:"index__contentWrap--otyyB",content:"index__content--gBUUc",wrap:"index__wrap--_4ScD",userInfo:"index__userInfo--_KMIV",image:"index__image--acXrD",user:"index__user--xYsKF",userName:"index__userName--aDVeB",job:"index__job--ocrbt",motto:"index__motto--XBAGG",introduce:"index__introduce--mEPE8",actions:"index__actions--IorkN",icons:"index__icons--OY6aA",link:"index__link--he5A9",iconWrap:"index__iconWrap--XxNnn",adsIcon:"index__adsIcon--agWhW",juejin:"index__juejin--gGd1F",wangzhiIcon:"index__wangzhiIcon--KIZxF",tabsWrap:"index__tabsWrap--JHxkp",wrapClass:"index__wrapClass--CbAcv",emptyWrap:"index__emptyWrap--ydJEa",contentPadding:"index__contentPadding--Nyx2X",dark:"index__dark--XJ3_a",darkIcon:"index__darkIcon--SxRee"};function D(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?D(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M=a.Z.TabPane;const Y=function(){var e=(0,m.lr)(),n=(0,s.Z)(e,1)[0],t=n.get("id"),l=n.get("tab"),r=(0,u.useState)(!1),v=(0,s.Z)(r,2),I=v[0],C=v[1],k=(0,u.useState)(l||"1"),b=(0,s.Z)(k,2),D=b[0],Y=b[1],H=(0,u.useState)(0),K=(0,s.Z)(H,2),L=K[0],U=K[1],V=(0,u.useState)(!1),X=(0,s.Z)(V,2),J=X[0],B=X[1],z=(0,u.useState)(0),F=(0,s.Z)(z,2),G=F[0],Q=F[1],q=(0,u.useState)({list:[],total:0,count:P.YH}),$=(0,s.Z)(q,2),ee=$[0],ne=$[1];(0,R.vV)(void 0,!0);var te=(0,x.s0)(),oe=(0,R.nR)().htmlWidth,le=(0,R.Jg)().siderVisible,ce=(0,R.iy)().themeMode,ie=(0,u.useRef)([]),se=(0,j.Z)().userInfoStore.getUserInfo,ae=(0,R.bc)(),re=ae.showAlert,de=ae.toLogin,ue=ae.onCloseAlert,me=ae.setAlertStatus,xe=(0,R.YN)({data:ee,loading:I,pageSize:P.YH}),ve=xe.pageNo,_e=xe.setPageNo,he=xe.onScroll,pe=xe.scrollTop,fe=xe.scrollbarRef,Ie=(0,R.Jh)({userId:t,authorId:null==se?void 0:se.userId,clearInfo:!0}).userInfo;(0,u.useEffect)((function(){l&&Y(l)}),[l]),(0,u.useEffect)((function(){Ce()}),[D,ve,t]),(0,u.useEffect)((function(){t||(ie.current=[],_e(1),ne({list:ie.current,total:0,count:0}))}),[t]),(0,u.useEffect)((function(){"3"===D&&(ge(),je())}),[D]);var je=function(){var e=(0,i.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g.wg,e.next=3,O.BN({userId:t||(null==se?void 0:se.userId),status:t&&t!==(null==se?void 0:se.userId)?1:0});case 3:e.t1=e.sent,(n=(0,e.t0)(e.t1)).success&&Q(n.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=(0,i.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g.wg,e.next=3,O.Up({userId:t||(null==se?void 0:se.userId),status:t&&t!==(null==se?void 0:se.userId)?1:0});case 3:e.t1=e.sent,(n=(0,e.t0)(e.t1)).success&&U(n.data.total);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(e){ie.current=[e].concat((0,c.Z)(ie.current)),ne(E(E({},ee),{},{list:ie.current}))},Ce=function(){var e=(0,i.Z)(d().mark((function e(){var n,o,l,i,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),n={pageNo:ve,pageSize:P.YH,userId:t||(null==se?void 0:se.userId),accessUserId:null==se?void 0:se.userId},t&&t!==(null==se?void 0:se.userId)&&(n.isVisitor=!0),g.tO.locSetItem("params",JSON.stringify({userId:t||(null==se?void 0:se.userId),accessUserId:null==se?void 0:se.userId,selectKey:D,from:"personal"})),e.t0=g.wg,e.next=7,O.XE(n,P.IE[D]);case 7:e.t1=e.sent,o=(0,e.t0)(e.t1),C(!1),o.success&&(l=o.data,i=l.total,s=l.list,ie.current=[].concat((0,c.Z)(ie.current),(0,c.Z)(s)),ne({list:ie.current,total:i,count:s.length}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=(0,u.useMemo)((function(){return(0,g.T9)(ee.list,"id")}),[ee.list]),be=(0,R.MO)({setAlertStatus:me,articleList:ee,updateList:ne,isAboutMe:"2"===D,listRef:ie}).likeArticle,Se=(0,R.Gx)({articleList:ee,setArticleList:ne,getArticleList:Ce,setAlertStatus:me,delType:D,listRef:ie,pageNo:ve,authorId:t,accessUserId:null==se?void 0:se.userId,getCollectionTotal:"3"===D?je:function(){},getCollectedTotal:"3"===D?ge:function(){},removeConfirmStyle:_()(T.removeConfirmStyle,"dark"===ce&&T.darkRemoveConfirmStyle)}).deleteArticle,Ze=function(e){var n=null==ee?void 0:ee.list.map((function(n){return n.id===e.id?E(E({},n),e):n}));ie.current=(0,c.Z)(n),ne(E(E({},ee),{},{list:ie.current}))},ye=function(e){te("/create?id=".concat(e))},We=function(e,n){te(n?"/detail/".concat(e,"?needScroll=1"):"/detail/".concat(e))},we=(0,u.useMemo)((function(){return t&&t!==(null==se?void 0:se.userId)?P.Ag:P.T3}),[t]),Ae=function(){te("/search")};return(0,S.jsxs)("div",{className:_()(T.Personal,"dark"===ce&&T.dark),children:[(0,S.jsx)(A.Z,{noHideMenuIcon:!0,className:T.changeIconWrap,themeMode:ce,htmlWidth:oe}),re&&(0,S.jsx)(y.Z,{onClick:de,onClose:ue}),(0,S.jsx)(W.Z,{right:(0,S.jsx)("div",{className:T.searchWrap,children:(0,S.jsx)(N.Z,{name:"icon-sousuo2",className:_()(T.iconWrap,"dark"===ce&&T.darkIcon),onClick:Ae})}),themeMode:ce,children:"我的主页"}),(0,S.jsx)(h.Z,{className:_()(T.contentWrap,oe>960&&le&&T.contentPadding),onScroll:he,scrollbarRef:fe,themeMode:ce,children:(0,S.jsx)("div",{className:T.content,id:"CONTENT",children:(0,S.jsxs)("div",{className:T.wrap,children:[(0,S.jsxs)("div",{className:T.userInfo,children:[(0,S.jsx)(p.Z,{url:(t?null==Ie?void 0:Ie.headUrl:null==se?void 0:se.headUrl)||P.Hn,transitionImg:P.Hn,className:T.image}),(0,S.jsxs)("div",{className:T.user,children:[(0,S.jsx)("div",{className:T.userName,children:(null==Ie?void 0:Ie.username)||(null==se?void 0:se.username)}),(0,S.jsx)("div",{className:T.job,children:Ie?(null==Ie?void 0:Ie.job)||"-":null==se?void 0:se.job}),(0,S.jsx)("div",{className:T.motto,children:Ie?(null==Ie?void 0:Ie.motto)||"-":null==se?void 0:se.motto}),(0,S.jsx)("div",{className:T.introduce,children:Ie?(null==Ie?void 0:Ie.introduce)||"-":null==se?void 0:se.introduce})]}),(0,S.jsxs)("div",{className:T.actions,children:[(0,S.jsx)("div",{className:T.icons,children:P.hY.map((function(e){return(null==se?void 0:se[e.label])&&(0,S.jsx)("a",{href:null==se?void 0:se[e.label],target:"_blank",rel:"noreferrer",className:T.link,children:(0,S.jsx)(N.Z,{name:e.name,className:T[e.className],iconWrapClass:T.iconWrap,title:e.title})},e.name)}))}),(t===(null==se?void 0:se.userId)||!t)&&(0,S.jsx)(o.Z,{type:"primary",ghost:!0,onClick:function(){te("/setting/profile")},children:"修改个人资料"})]})]}),(0,S.jsx)("div",{className:T.tabsWrap,children:(0,S.jsx)(a.Z,{defaultActiveKey:l||"1",onChange:function(e){Y(e),ie.current=[],_e(1),ne({list:ie.current,total:0,count:0})},tabBarStyle:"dark"===ce?{backgroundColor:P.VI.DARK_BGC_DEEP,color:P.VI.DARK_FC}:{},children:we.map((function(e){return(0,S.jsx)(M,{tab:e.name,children:"3"!==e.value?(0,S.jsx)(f.Z,{list:ke,total:ee.total,wrapClass:T.wrapClass,toDetail:We,deleteArticle:Se,likeArticle:be,onEditArticle:ye,loading:I,fromPage:!t,themeMode:ce,htmlWidth:oe}):(0,S.jsx)(Z,{list:ke,total:ee.total,collectTotal:G,loading:I,collectedCount:L,visible:J,onHide:function(){return B(!1)},onShow:function(){return B(!0)},getAddRes:Ne,delCollection:Se,updateCollection:Ze,authorId:t||(null==se?void 0:se.userId),themeMode:ce,htmlWidth:oe})},e.value)}))})})]})})}),(0,S.jsx)(w.Z,{scrollTop:pe,scrollbarRef:fe,htmlWidth:oe})]})}}}]);