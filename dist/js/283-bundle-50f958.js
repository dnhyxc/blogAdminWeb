"use strict";(self.webpackChunkwebpack_config=self.webpackChunkwebpack_config||[]).push([[283],{39841:(e,t,n)=>{n.d(t,{Z:()=>O});n(42931);var r=n(83107),c=(n(900),n(9676)),s=n(4942),l=(n(34935),n(71577)),i=n(15861),a=n(93433),o=n(29439),d=n(64687),u=n.n(d),p=n(67294),f=n(96974),m=n(80411),x=n.n(m),h=n(74317),v=n(43455),_=n(19674),g=n(31660),j=n(95717),b=n(20555),k=n(49058),N=n(56663);const y={clickNoSelectText:"index__clickNoSelectText--gOBn4",titleWrap:"index__titleWrap--uLKP9",darkTitle:"index__darkTitle--cxk25",submit:"index__submit--Bkir6",addIcon:"index__addIcon--sjLBM",containerClassName:"index__containerClassName--dfAQC",scrollWrapStyle:"index__scrollWrapStyle--DDC_8",contentStyle:"index__contentStyle--AJJJK",collectionList:"index__collectionList--j0WEl",collectionItem:"index__collectionItem--sgeKD",desc:"index__desc--W9kzx",collectionName:"index__collectionName--L15cC",lockIcon:"index__lockIcon--JnAxj",collectionCount:"index__collectionCount--vUdCc",noMore:"index__noMore--ctiL4",selectSubmit:"index__selectSubmit--qRSyr",darkContainerClassName:"index__darkContainerClassName--OTwge"};var C=n(85893);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const O=function(e){var t=e.visible,n=e.onCancel,s=e.showCollectionDrawer,d=e.getCollectRes,m=e.getSelectCollectIds,S=e.moveArticleId,O=e.selectCollectId,Z=e.createCollectId,w=e.showCreateDrawer,P=void 0===w?null:w,M=e.themeMode,D=(0,p.useState)(!1),L=(0,o.Z)(D,2),R=L[0],T=L[1],W=(0,p.useState)([]),E=(0,o.Z)(W,2),U=E[0],K=E[1],z=(0,p.useState)(!1),A=(0,o.Z)(z,2),H=A[0],J=A[1],Y=(0,p.useState)({list:[],total:0,count:0}),q=(0,o.Z)(Y,2),B=q[0],V=q[1],F=(0,f.UO)().id,X=(0,f.TH)().pathname,G=(0,p.useRef)([]),Q=(0,_.Z)().userInfoStore.getUserInfo,$=(0,g.YN)({data:B,loading:H,pageSize:k.YH}),ee=$.pageNo,te=$.setPageNo,ne=$.onScroll;(0,p.useEffect)((function(){if(t){re();var e=[];Z&&e.push(Z),O&&e.push(O),K([].concat(e,(0,a.Z)(U)))}else te(1),G.current=[],V({list:G.current,total:0,count:0}),K([])}),[t,ee,O,Z]),(0,p.useEffect)((function(){m&&m(U)}),[U]);var re=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,r,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=Q&&Q.userId){e.next=2;break}return e.abrupt("return");case 2:return J(!0),e.t0=b.wg,e.next=6,j.M1({pageNo:ee,pageSize:k.YH,userId:null==Q?void 0:Q.userId});case 6:e.t1=e.sent,t=(0,e.t0)(e.t1),J(!1),t.success?(n=t.data,r=n.total,c=n.list,G.current=[].concat((0,a.Z)(G.current),(0,a.Z)(c)),V({list:G.current,total:r,count:c.length})):(0,b.vU)(t.message);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(e){if(U.find((function(t){return t===e}))){var t=U.filter((function(t){return t!==e}));K((0,a.Z)(t))}else U.push(e),K((0,a.Z)(U))},se=function(){var e=(0,i.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U.length||(0,b.um)("请选择一个收藏集"),null!=Q&&Q.userId&&F&&U.length){e.next=3;break}return e.abrupt("return");case 3:return e.t0=b.wg,e.next=6,j.KR({ids:U,articleId:S||F,userId:null==Q?void 0:Q.userId,isMove:X.includes("/collect")});case 6:e.t1=e.sent,(t=(0,e.t0)(e.t1)).success?(n(),(0,b.Vp)(t.message),X.includes("/collect")?d&&d(t.data,!0):d&&d(t.data)):(0,b.vU)(t.message);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=(0,C.jsxs)("div",{className:y.titleWrap,children:[(0,C.jsx)("div",{className:x()(y.title,"dark"===M&&y.darkTitle),children:"选择收藏集"}),(0,C.jsxs)(l.Z,{type:"link",onClick:function(){T(!0),P&&P(!0),n&&n()},className:y.submit,children:[(0,C.jsx)(h.Z,{name:"icon-add",className:y.addIcon,noStopPropagation:!0}),(0,C.jsx)("span",{children:"新建收藏集"})]})]});return(0,C.jsxs)("div",{className:y.CollectionDrawer,children:[(0,C.jsx)(r.Z,{title:le,placement:"bottom",closable:!1,onClose:function(){return n()},visible:t,height:427,footer:[(0,C.jsx)(l.Z,{type:"primary",className:y.selectSubmit,onClick:se,children:"确定"},"submit")],headerStyle:"dark"===M?I(I({},k.ju.headerStyle),{},{padding:"10px",borderRadius:"0"}):{padding:"10px",borderRadius:"0"},bodyStyle:"dark"===M?I(I({},k.ju.bodyStyle),{},{padding:"0 0 10px 0",overflow:"hidden"}):{padding:"0 0 10px 0",overflow:"hidden"},footerStyle:"dark"===M?I({},k.ju.bodyStyle):{padding:"10px",height:"60px"},maskStyle:"dark"===M?I({},k.ju.maskStyle):{},children:(0,C.jsx)(v.Z,{className:y.scrollWrapStyle,wrapClassName:y.contentStyle,containerClassName:x()(y.containerClassName,"dark"===M&&y.darkContainerClassName),themeMode:M,onScroll:ne,children:(0,C.jsxs)("div",{className:y.collectionList,children:[null==B?void 0:B.list.map((function(e){var t;return(0,C.jsxs)("div",{className:y.collectionItem,children:[(0,C.jsxs)("div",{className:y.desc,onClick:function(){return ce(e.id)},children:[(0,C.jsxs)("div",{className:y.collectionName,children:[(0,C.jsx)("span",{children:e.name}),2===e.status&&(0,C.jsx)(h.Z,{name:"icon-lock-full",className:y.lockIcon})]}),(0,C.jsxs)("div",{className:y.collectionCount,children:[null===(t=e.articleIds)||void 0===t?void 0:t.length,"篇文章"]})]}),(0,C.jsx)(c.Z,{checked:U.includes(e.id),onChange:function(){return ce(e.id)}})]},e.id)})),(null==B?void 0:B.list.length)!==(null==B?void 0:B.total)||H?(0,C.jsx)("div",{className:y.noMore,children:"loading..."}):(0,C.jsx)("div",{className:y.noMore,children:"共(".concat(null==B?void 0:B.total,")条，没有更多了～～～")})]})})}),!P&&(0,C.jsx)(N.Z,{visible:R,onCancel:function(e){T(!1),e||s&&s()},onCheckedItem:ce,themeMode:M})]})}},45015:(e,t,n)=>{n.d(t,{Z:()=>Y});n(15692);var r=n(29759),c=(n(900),n(9676)),s=n(4942),l=(n(34935),n(71577)),i=n(15861),a=n(93433),o=n(29439),d=n(64687),u=n.n(d),p=n(67294),f=n(96974),m=n(80411),x=n.n(m),h=n(43455),v=n(74317),_=n(19674),g=n(31660),j=n(95717),b=n(20555),k=n(49058);const N="index__title--srFCv",y="index__info--Y25JL",C="index__darkTitle--O7bcg",S="index__containerClassName--HxnID",I="index__scrollWrapStyle--vvRif",O="index__contentStyle--L1bhu",Z="index__collectionList--uvvWG",w="index__collectionItem--LwlRP",P="index__desc--KFpIb",M="index__collectionName--p03Dz",D="index__lockIcon--XheT1",L="index__collectionCount--lqOJm",R="index__noMore--HRdh9",T="index__darkContainerClassName--OONvd",W="index__wrapClassName--t_hxM",E="index__actions--kIYDi",U="index__addIcon--UqK0M",K="index__action--dp2X0",z="index__darkWrapClassName--jOdjo";var A=n(85893);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Y=function(e){var t=e.visible,n=e.onCancel,s=e.getAddVisible,d=e.getCollectRes,m=e.moveArticleId,H=e.getSelectCollectIds,Y=e.selectCollectId,q=e.createCollectId,B=e.themeMode,V=e.sendMsg,F=(0,p.useState)([]),X=(0,o.Z)(F,2),G=X[0],Q=X[1],$=(0,p.useState)(!1),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],re=(0,p.useState)({list:[],total:0,count:0}),ce=(0,o.Z)(re,2),se=ce[0],le=ce[1],ie=(0,f.UO)().id,ae=(0,f.TH)().pathname,oe=(0,p.useRef)([]),de=(0,_.Z)().userInfoStore.getUserInfo,ue=(0,g.YN)({data:se,loading:te,pageSize:10}),pe=ue.pageNo,fe=ue.setPageNo,me=ue.onScroll;(0,p.useEffect)((function(){if(t){xe();var e=[];Y&&e.push(Y),q&&e.push(q),Q([].concat(e,(0,a.Z)(G)))}else fe(1),oe.current=[],le({list:oe.current,total:0,count:0}),Q([])}),[t,pe,Y,q]),(0,p.useEffect)((function(){H&&H(G)}),[G]);var xe=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,r,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=de&&de.userId){e.next=2;break}return e.abrupt("return");case 2:return ne(!0),e.t0=b.wg,e.next=6,j.M1({pageNo:pe,pageSize:10,userId:null==de?void 0:de.userId});case 6:e.t1=e.sent,t=(0,e.t0)(e.t1),ne(!1),t.success?(n=t.data,r=n.total,c=n.list,oe.current=[].concat((0,a.Z)(oe.current),(0,a.Z)(c)),le({list:oe.current,total:r,count:c.length})):(0,b.vU)(t.message);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(e){if(G.find((function(t){return t===e}))){var t=G.filter((function(t){return t!==e}));Q((0,a.Z)(t))}else G.push(e),Q((0,a.Z)(G))},ve=function(){var e=(0,i.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G.length||(0,b.um)("请选择一个收藏集"),null!=de&&de.userId&&ie&&G.length){e.next=3;break}return e.abrupt("return");case 3:return e.t0=b.wg,e.next=6,j.KR({ids:G,articleId:m||ie,userId:null==de?void 0:de.userId,isMove:ae.includes("/collect")});case 6:e.t1=e.sent,(t=(0,e.t0)(e.t1)).success?(n(),(0,b.Vp)(t.message),ae.includes("/collect")?d&&d(t.data,!0):d&&d(t.data),V&&V("COLLECT")):(0,b.vU)(t.message);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=(0,A.jsxs)("div",{className:x()(N,"dark"===B&&C),children:[(0,A.jsx)("span",{children:"选择收藏集"}),(0,A.jsx)("span",{className:y,children:"（创建或选择你想添加的收藏集）"})]});return(0,A.jsx)(r.Z,{title:_e,width:520,visible:t,centered:!0,wrapClassName:x()(W,"dark"===B&&z),onCancel:function(){return n()},footer:[(0,A.jsxs)("div",{className:E,children:[(0,A.jsxs)(l.Z,{type:"link",onClick:function(){s(!0),n()},children:[(0,A.jsx)(v.Z,{name:"icon-add",className:U,noStopPropagation:!0}),(0,A.jsx)("span",{children:"新建收藏集"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(l.Z,{type:"primary",ghost:!0,className:K,onClick:function(){return n()},children:"取消"},"back"),(0,A.jsx)(l.Z,{type:"primary",className:K,onClick:ve,children:"确定"},"submit")]})]},"1")],bodyStyle:"dark"===B?J({},k.ju.bodyStyle):{},children:(0,A.jsx)(h.Z,{className:I,wrapClassName:O,containerClassName:x()(S,"dark"===B&&T),onScroll:me,themeMode:B,children:(0,A.jsxs)("div",{className:Z,children:[null==se?void 0:se.list.map((function(e){var t;return(0,A.jsxs)("div",{className:w,children:[(0,A.jsxs)("div",{className:P,onClick:function(){return he(e.id)},children:[(0,A.jsxs)("div",{className:M,children:[(0,A.jsx)("span",{children:e.name}),2===e.status&&(0,A.jsx)(v.Z,{name:"icon-lock-full",className:D})]}),(0,A.jsxs)("div",{className:L,children:[null===(t=e.articleIds)||void 0===t?void 0:t.length,"篇文章"]})]}),(0,A.jsx)(c.Z,{checked:G.includes(e.id),onChange:function(){return he(e.id)}})]},e.id)})),(null==se?void 0:se.list.length)!==(null==se?void 0:se.total)||te?(0,A.jsx)("div",{className:R,children:"loading..."}):(0,A.jsx)("div",{className:R,children:"共(".concat(null==se?void 0:se.total,")条，没有更多了～～～")})]})})})}}}]);