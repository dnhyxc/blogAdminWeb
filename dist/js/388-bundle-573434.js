"use strict";(self.webpackChunkwebpack_config=self.webpackChunkwebpack_config||[]).push([[388],{68281:(e,n,t)=>{t.d(n,{Z:()=>V});var i=t(67294),a=t(80411),s=t.n(a),r=(t(34935),t(71577)),c=t(15861),l=t(29439),o=t(64687),d=t.n(o),u=t(96974),h=t(49058),x=t(81237),_=t(95717),m=t(20555);const f="index__needMarginBottom--jbdK1",v="index__introductionWrap--cRwkD",p="index__card--a148g",g="index__image--Sgd5D",j="index__nameInfo--i1Khy",N="index__name--vu0aO",k="index__desc--Q1SrY",S="index__articleInfo--ExCKV",w="index__statistical--rThMZ",y="index__articleTotal--kFXGi",b="index__socialWrap--RwYKS",Z="index__link--ctC90",C="index__github--srJ9b",I="index__socialList--_k5Qr",R="index__dark--VmH3q";var M=t(85893);const W=function(e){var n=e.className,t=e.showRecommendArticle,a=e.themeMode,o=(0,i.useState)({userId:""}),W=(0,l.Z)(o,2),T=W[0],A=W[1],U=(0,u.s0)();(0,i.useEffect)((function(){H()}),[]);var H=function(){var e=(0,c.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m.wg,e.next=3,_.bG({auth:1,needTotal:!0});case 3:e.t1=e.sent,(n=(0,e.t0)(e.t1)).success&&A(n.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return T.userId?(0,M.jsxs)("div",{className:s()(v,n,t&&f,"dark"===a&&R),children:[(0,M.jsx)("div",{className:p,children:(0,M.jsx)(x.Z,{url:(null==T?void 0:T.headUrl)||h.Hn,transitionImg:h.Hn,className:g,onClick:function(){U("/author")}})}),(0,M.jsxs)("div",{className:j,children:[(0,M.jsx)("div",{className:N,children:null==T?void 0:T.username}),(0,M.jsx)("div",{suppressContentEditableWarning:!0,contentEditable:"true",className:k,title:null==T?void 0:T.motto,children:null==T?void 0:T.motto})]}),(0,M.jsx)("div",{className:S,children:(0,M.jsxs)("div",{className:w,children:["共发表",(0,M.jsx)("span",{className:y,children:null==T?void 0:T.articleTotal}),"篇文章"]})}),(0,M.jsxs)("div",{className:b,children:[(0,M.jsx)("a",{href:"http://".concat(h.R4,":8090"),target:"_blank",rel:"noreferrer",className:Z,children:"墨客管理后台"}),(0,M.jsx)(r.Z,{className:C,type:"primary",onClick:function(){null!=T&&T.github?window.open(null==T?void 0:T.github):(0,m.um)("还没设置github地址")},children:"GitHub"}),(0,M.jsxs)("div",{className:I,children:[(null==T?void 0:T.juejin)&&(0,M.jsx)("span",{onClick:function(){null!=T&&T.juejin?window.open(null==T?void 0:T.juejin):(0,m.um)("还没设置掘金地址")},children:"掘金"}),(null==T?void 0:T.zhihu)&&(0,M.jsx)("span",{onClick:function(){null!=T&&T.juejin?window.open(null==T?void 0:T.zhihu):(0,m.um)("还没设置知乎地址")},children:"知乎"}),(null==T?void 0:T.blog)&&(0,M.jsx)("span",{onClick:function(){null!=T&&T.juejin?window.open(null==T?void 0:T.blog):(0,m.um)("还没设置博客地址")},children:"博客"})]})]})]}):null};var T=t(19674),A=t(31660),U=t(96186);const H="index__NewArticles--lkils",E="index__contant--TGks6",L="index__header--AUZK9",D="index__item--ggSOn",z="index__title--Mqzb4",P="index__abstract--ofaGV",Y="index__likeCount--wgUPL",B="index__dark--X2Shr",G="index__itemDark--wpYy9",O="index__ipcWrap--Q4Jds",Q="index__changeTop--tkX85";const J=function(e){var n=e.scrollRef,t=e.themeMode,a=e.htmlWidth,r=void 0===a?0:a,o=(0,i.useState)([]),h=(0,l.Z)(o,2),x=h[0],f=h[1],v=(0,u.s0)(),p=(0,T.Z)().userInfoStore.getUserInfo,g=(0,A.Jg)().siderVisible;(0,i.useEffect)((function(){j()}),[]);var j=function(){var e=(0,c.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=U.w,e.next=3,_.un({userId:null==p?void 0:p.userId});case 3:e.t1=e.sent,(n=(0,e.t0)(e.t1)).success?f(n.data):(0,m.vU)(n.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,M.jsxs)("div",{className:s()(H,g&&r>960&&Q,"dark"===t&&B),ref:n,children:[(0,M.jsxs)("div",{className:s()(E,"dark"===t&&B),children:[(0,M.jsx)("div",{className:s()(L,"dark"===t&&B),children:"文章推荐"}),x.length>0&&x.map((function(e){return(0,M.jsxs)("div",{className:s()(D,"dark"===t&&G),onClick:function(){return n=e.id,void v("/detail/".concat(n));var n},children:[(0,M.jsx)("div",{className:z,children:e.title}),(0,M.jsxs)("div",{className:P,children:[(0,M.jsx)("span",{children:(0,m.fg)(e.createTime)}),(null==e?void 0:e.likeCount)>0&&(0,M.jsxs)("span",{className:Y,children:[e.likeCount," 点赞"]})]})]},e.id)}))]}),g&&(0,M.jsx)("div",{className:O,children:(0,M.jsx)("a",{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noreferrer",children:"浙ICP备2024111222号-1"})})]})},K="index__container--j1TfK";const V=function(e){var n=e.className,t=e.showRecommendArticle,i=e.scrollRef,a=e.themeMode,r=e.htmlWidth,c=void 0===r?0:r;return c>960?(0,M.jsxs)("div",{className:s()(K,n),children:[(0,M.jsx)(W,{showRecommendArticle:t,themeMode:a}),t&&(0,M.jsx)(J,{scrollRef:i,themeMode:a,htmlWidth:c})]}):null}},88388:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ce});t(34935);var i=t(71577),a=t(93433),s=t(15861),r=t(29439),c=t(64687),l=t.n(c),o=t(67294),d=t(96974),u=t(80411),h=t.n(u),x=t(43455),_=t(10814),m=t(68281),f=t(67020),v=t(74317),p=t(29191),g=(t(37796),t(24044));const j="index__MSearch--qOPO8",N="index__searhInp--nlH6x";var k=t(85893);const S=function(e){var n=e.inputRef,t=e.placeholder,i=e.onSearch,a=e.onBlur,s=e.className;return(0,k.jsx)("div",{className:h()(j,s),children:(0,k.jsx)(g.Z.Search,{ref:n,enterButton:!0,className:N,placeholder:t||"请输入搜索内容",onSearch:function(e){return i&&i(e)},onBlur:function(e){return a&&a(e)}})})};var w=t(13503),y=t(26260),b=t(31660),Z=t(19674),C=t(95717),I=t(49058),R=t(20555),M=(t(23441),t(90706)),W=t(96186);const T={clickNoSelectText:"index__clickNoSelectText--D1hC2",Cover:"index__Cover--_x65n",imageAnimation:"index__imageAnimation--H2mT_",content:"index__content--hLEUq",desc:"index__desc--WenL7",authorName:"index__authorName--YTJLx",run:"index__run--QxaGD",line:"index__line--o63BL",letterspacing:"index__letterspacing--TfZtp",downWrap:"index__downWrap--ZzMmS",shaking:"index__shaking--GOfcF",downIcon:"index__downIcon--LBF9t",MobileCover:"index__MobileCover--ENldf",load:"index__load--c1Dzq",carouselWrap:"index__carouselWrap--DtEId",carouselItem:"index__carouselItem--k5DYY",tag:"index__tag--B_HG3",classify:"index__classify--DSdGn",abstract:"index__abstract--xIsxx",typing:"index__typing--s6Whp",caret:"index__caret--vk1gD"};const A=function(e){var n=e.scrollbarRef,t=e.children,i=(0,o.useState)([]),a=(0,r.Z)(i,2),c=a[0],u=a[1],h=(0,d.s0)(),x=(0,Z.Z)().userInfoStore.getUserInfo,_=(0,b.nR)().htmlWidth;(0,o.useEffect)((function(){_<=960&&m()}),[_]);var m=function(){var e=(0,s.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=W.w,e.next=3,C.un({userId:null==x?void 0:x.userId});case 3:e.t1=e.sent,(n=(0,e.t0)(e.t1)).success?u(n.data):(0,R.vU)(n.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(e,n){e.stopPropagation(),h("/personal?id=".concat(n))};return _>960?(0,k.jsxs)("div",{className:T.Cover,children:[t,(0,k.jsx)("div",{className:T.content,children:(0,k.jsxs)("div",{className:T.desc,children:[(0,k.jsx)("div",{className:T.authorName,onClick:function(e){return f(e,(null==x?void 0:x.userId)||"")},children:(null==x?void 0:x.username)||""}),(0,k.jsx)("div",{className:T.line,children:(null==x?void 0:x.motto)||"行到水穷处，坐看云起时！"})]})}),(0,k.jsx)("div",{className:T.downWrap,children:(0,k.jsx)("div",{className:T.shaking,onClick:function(){null==n||n.current.scrollTop(document.body.clientHeight-49)},children:(0,k.jsx)(v.Z,{name:"icon-double-arrow-down",className:T.downIcon,noStopPropagation:!0})})})]}):(0,k.jsxs)("div",{className:T.MobileCover,children:[t,(0,k.jsx)("div",{className:T.content,children:c.length>0?(0,k.jsx)(M.Z,{autoplay:!0,children:c.map((function(e){return(0,k.jsx)("div",{className:T.carouselWrap,children:(0,k.jsx)("div",{className:T.carouselItem,style:(n=e.coverImage,{backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"url(".concat(n||I.zl,")")}),onClick:function(){return n=e.id,void h(t?"/detail/".concat(n,"?needScroll=1"):"/detail/".concat(n));var n,t},children:(0,k.jsxs)("div",{className:T.desc,children:[(0,k.jsx)("div",{className:T.title,children:e.title}),(0,k.jsxs)("div",{className:T.authorName,children:[(0,k.jsx)("span",{className:T.tag,onClick:function(n){return f(n,e.authorId)},children:e.authorName}),(0,k.jsx)("span",{className:T.classify,onClick:function(n){return function(e,n){e.stopPropagation(),h("/classify?classify=".concat(n))}(n,e.classify)},children:e.classify})]}),(0,k.jsx)("div",{className:T.abstract,children:e.abstract})]})})},e.id);var n}))}):(0,k.jsx)("div",{className:T.load,children:"正在卖力加载中..."})})]})},U="index__removeConfirmStyle--PPAES",H="index__darkRemoveConfirmStyle--qpC8x",E="index__container--lc0TI",L="index__changeIconWrap--iXnIu",D="index__header--UekKp",z="index__headTitle--eavIt",P="index__itemStyles--MNtVh",Y="index__iconStyles--On05R",B="index__searchWrap--ZlZQ4",G="index__toSearch--fNdqm",O="index__contentWrap--TKpaU",Q="index__rightbar--t9wQJ",J="index__content--k7SeU",K="index__changePaddingTop--BHPYB",V="index__wrapClassName--iakVi",q="index__containerClassName--oLufo",F="index__noMoreStyle--UbyJW",X="index__paddingTopStyle--yMmiM",$="index__iconWrap--MQLNk",ee="index__searchIcon--i1OC1",ne="index__headerStyle--UFJUj",te="index__activeMenuStyle--ziieD",ie="index__headerDarkStyle--Qy6Z3",ae="index__dark--iec5u",se="index__inputSearch--MQj8e",re="index__darkIconWrap--Az3op";const ce=function(){var e=(0,o.useState)({list:[],total:0,count:0}),n=(0,r.Z)(e,2),t=n[0],c=n[1],u=(0,o.useState)(!1),g=(0,r.Z)(u,2),j=g[0],N=g[1],M=(0,o.useState)(!1),W=(0,r.Z)(M,2),T=W[0],ce=W[1],le=(0,o.useState)(""),oe=(0,r.Z)(le,2),de=oe[0],ue=oe[1],he=(0,o.useState)(!1),xe=(0,r.Z)(he,2),_e=xe[0],me=xe[1],fe=(0,o.useRef)(null),ve=(0,o.useRef)([]),pe=(0,d.s0)(),ge=(0,b.iy)().themeMode,je=(0,b.bc)(),Ne=je.showAlert,ke=je.toLogin,Se=je.onCloseAlert,we=je.setAlertStatus,ye=(0,Z.Z)().userInfoStore.getUserInfo,be=(0,b.nR)().htmlWidth,Ze=(0,b.Jg)().siderVisible,Ce=(0,b.YN)({data:t,loading:j,pageSize:I.YH,paddingTopStyle:Ze&&be>960&&X,headerStyle:Ze&&be>960&&ne,headerDarkStyle:Ze&&be>960&&ie,themeMode:ge,siderVisible:Ze}),Ie=Ce.pageNo,Re=Ce.setPageNo,Me=Ce.onScroll,We=Ce.scrollRef,Te=Ce.scrollbarRef,Ae=Ce.scrollTop,Ue=Ce.contentWrapRef,He=Ce.headerRef;(0,o.useEffect)((function(){R.tO.locRemoveItem("params")}),[]),(0,o.useEffect)((function(){_e?ze(de):Ee()}),[Ie,de,_e]),(0,o.useEffect)((function(){var e;T&&(null==fe||null===(e=fe.current)||void 0===e||e.focus({cursor:"end"}))}),[fe,T]);var Ee=function(){var e=(0,s.Z)(l().mark((function e(){var n,t,i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.t0=R.wg,e.next=4,C.yg({pageNo:Ie,pageSize:I.YH,userId:null==ye?void 0:ye.userId});case 4:e.t1=e.sent,n=(0,e.t0)(e.t1),N(!1),n.success?(t=n.data,i=t.total,s=t.list,ve.current=[].concat((0,a.Z)(ve.current),(0,a.Z)(s)),c({list:ve.current,total:i,count:s.length})):(0,R.vU)(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=(0,b.Gx)({articleList:t,setArticleList:c,getArticleList:Ee,setAlertStatus:we,listRef:ve,pageNo:Ie,keyword:de,removeConfirmStyle:h()(U,"dark"===ge&&H)}).deleteArticle,De=(0,b.MO)({setAlertStatus:we,articleList:t,updateList:c,listRef:ve}).likeArticle,ze=function(){var e=(0,s.Z)(l().mark((function e(n){var t,i,s,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.t0=R.wg,e.next=4,C.vA({keyword:n,pageNo:Ie,pageSize:I.YH,userId:null==ye?void 0:ye.userId});case 4:e.t1=e.sent,t=(0,e.t0)(e.t1),N(!1),t.success?(i=t.data,s=i.total,r=i.list,ve.current=[].concat((0,a.Z)(ve.current),(0,a.Z)(r)),c({list:ve.current,total:s,count:r.length})):(0,R.vU)(t.message);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Pe=function(){ce(!0)},Ye=function(e){null==Te||Te.current.scrollTop(document.body.clientHeight-49),ue(e),de!==e&&(Re(1),ve.current=[],c({list:ve.current,total:0,count:0})),me(!!e)},Be=function(){ce(!1)},Ge=function(){pe("/search")},Oe=function(){return(0,k.jsxs)("div",{className:B,children:[(0,k.jsxs)("div",{children:[!T&&(0,k.jsx)(v.Z,{name:"icon-sousuo2",className:h()(be>960&&Ze&&ee,$,"dark"===ge&&re),onClick:be>960?Pe:Ge}),T&&(0,k.jsx)(S,{className:Ae>=document.body.clientHeight-50&&se,inputRef:fe,onSearch:Ye,onBlur:Be})]}),be>960&&(0,k.jsx)(i.Z,{type:"link",className:G,onClick:Ge,children:"高级搜索"})]})};return(0,k.jsxs)("div",{className:h()(E,"dark"===ge&&ae),children:[be<=960&&(0,k.jsx)(y.Z,{noHideMenuIcon:!0,className:L,themeMode:ge,htmlWidth:be}),Ne&&(0,k.jsx)(p.Z,{onClick:ke,onClose:Se}),(be<=960||!Ze)&&(0,k.jsx)(_.Z,{right:Oe(),className:be>960&&Ze&&D,headerRef:He,themeMode:ge,children:"文章列表"}),t&&(0,k.jsxs)(x.Z,{className:h()(O,Ze&&be>960&&K),wrapClassName:Ze&&be>960?V:"",containerClassName:Ze&&be>960?q:"",onScroll:Me,scrollbarRef:Te,contentWrapRef:Ue,themeMode:ge,children:[(Ze||be<=960)&&(0,k.jsx)(A,{scrollbarRef:Te,children:be>960&&(0,k.jsx)(_.Z,{right:Oe(),className:be>960&&Ze&&D,headerRef:He,itemStyles:be>960&&Ze&&P,iconStyles:be>960&&Ze&&Y,activeMenuStyle:Ae<document.body.clientHeight-50&&te,themeMode:ge,children:(0,k.jsx)("div",{className:z,children:"文章列表"})})}),(0,k.jsxs)("div",{className:J,id:"CONTENT",children:[(0,k.jsx)(f.Z,{list:t.list,total:t.total,toDetail:function(e,n){pe(n?"/detail/".concat(e,"?needScroll=1"):"/detail/".concat(e))},deleteArticle:Le,likeArticle:De,onEditArticle:function(e){pe("/create?id=".concat(e))},loading:j,noMoreStyle:Ze&&be>960?F:"",themeMode:ge,htmlWidth:be}),(0,k.jsx)(m.Z,{className:Q,showRecommendArticle:!0,scrollRef:We,themeMode:ge,htmlWidth:be})]})]}),(0,k.jsx)(w.Z,{scrollTop:Ae,scrollbarRef:Te,htmlWidth:be})]})}}}]);