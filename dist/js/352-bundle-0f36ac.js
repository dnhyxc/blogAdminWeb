"use strict";(self.webpackChunkwebpack_config=self.webpackChunkwebpack_config||[]).push([[352],{14110:(e,n,t)=>{t.d(n,{Z:()=>_});t(15692);var a=t(29759),r=(t(11266),t(47933)),s=(t(34935),t(71577)),i=t(4942),l=t(15861),o=(t(44295),t(67773)),c=t(29439),d=(t(37796),t(24044)),u=t(64687),p=t.n(u),f=t(67294),m=t(80411),x=t.n(m),v=t(19674),h=t(95717),b=t(49058),j=t(20555);const g={clickNoSelectText:"index__clickNoSelectText--RkuQk",wrapClassName:"index__wrapClassName--Ke6yK",action:"index__action--vBK00",radioGroup:"index__radioGroup--EUQMa",radio:"index__radio--JWtI5",info:"index__info--ZNTNR",darkWrapClassName:"index__darkWrapClassName--g7APx",darkAddCollection:"index__darkAddCollection--ywCWA"};var k=t(85893);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var C=d.Z.TextArea;const _=function(e){var n=e.visible,t=e.onCancel,i=e.showCollection,u=e.getAddRes,m=e.collectInfo,y=void 0===m?null:m,_=e.updateCollection,Z=e.hideCollectModel,N=e.getCreateCollectId,O=e.themeMode,I=(0,f.useState)(""),P=(0,c.Z)(I,2),S=P[0],T=P[1],A=o.Z.useForm(),D=(0,c.Z)(A,1)[0],R=(0,v.Z)().userInfoStore.getUserInfo;(0,f.useEffect)((function(){null!=y&&y.name&&n&&(T(null==y?void 0:y.name),D.setFieldsValue({name:null==y?void 0:y.name,desc:null==y?void 0:y.desc,status:null==y?void 0:y.status}))}),[y,n]);var V=function(){D.setFieldsValue({name:"",desc:"",status:1}),T("")},W=function(){t(),Z||i&&i()},M=function(){var e=(0,l.Z)(p().mark((function e(){var n,a,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=D.getFieldsValue(),e.t0=j.wg,e.next=4,h.BL(w(w({},n),{},{userId:null==R?void 0:R.userId}));case 4:e.t1=e.sent,(a=(0,e.t0)(e.t1)).success?((0,j.Vp)(a.message),i&&i(),u&&u(a.data),N&&N(null==a||null===(r=a.data)||void 0===r?void 0:r.id),t(),V()):(0,j.vU)(a.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,l.Z)(p().mark((function e(){var n,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=y&&y.id){e.next=2;break}return e.abrupt("return");case 2:return n=D.getFieldsValue(),e.t0=j.wg,e.next=6,h.Rm(w(w({},n),{},{userId:null==R?void 0:R.userId,id:null==y?void 0:y.id}));case 6:e.t1=e.sent,(a=(0,e.t0)(e.t1)).success?((0,j.Vp)(a.message),_&&_(w(w({},n),{},{id:null==y?void 0:y.id})),t(),V()):(0,j.vU)(a.message);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=R&&R.userId){e.next=2;break}return e.abrupt("return");case 2:null!=y&&y.id?U():M();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,k.jsx)(a.Z,{title:"新建收藏集",width:520,centered:!0,visible:n,wrapClassName:x()(g.wrapClassName,"dark"===O&&g.darkWrapClassName),onCancel:W,keyboard:!0,maskClosable:!1,getContainer:!1,footer:[(0,k.jsx)(s.Z,{type:"primary",ghost:!0,className:g.action,onClick:W,children:"取消"},"back"),(0,k.jsx)(s.Z,{type:"primary",className:g.action,onClick:z,disabled:!S,children:"确定"},"submit")],bodyStyle:"dark"===O?w({},b.ju.bodyStyle):{},children:(0,k.jsx)("div",{className:x()(g.AddCollection,"dark"===O&&g.darkAddCollection),children:(0,k.jsxs)(o.Z,{labelCol:{span:3},wrapperCol:{span:20},layout:"horizontal",form:D,name:"form",children:[(0,k.jsx)(o.Z.Item,{label:"名称",name:"name",initialValue:null==y?void 0:y.name,children:(0,k.jsx)(d.Z,{placeholder:"请输入收藏集名称",maxLength:50,value:S,onChange:function(e){return function(e){var n=e.target.value.trim();T(n)}(e)}})}),(0,k.jsx)(o.Z.Item,{label:"描述",name:"desc",initialValue:null==y?void 0:y.desc,children:(0,k.jsx)(C,{placeholder:"请输入收藏集描述",rows:5,autoSize:{minRows:5,maxRows:10},maxLength:100,showCount:!0})}),(0,k.jsx)(o.Z.Item,{name:"status",wrapperCol:{offset:1,span:20},initialValue:(null==y?void 0:y.status)||1,children:(0,k.jsxs)(r.ZP.Group,{className:g.radioGroup,children:[(0,k.jsxs)(r.ZP,{value:1,className:g.radio,children:[(0,k.jsx)("span",{children:"公开"}),(0,k.jsx)("span",{className:g.info,children:"当其他人关注此收藏集后不可再更改为隐私"})]}),(0,k.jsxs)(r.ZP,{value:2,children:[(0,k.jsx)("span",{children:"隐私"}),(0,k.jsx)("span",{className:g.info,children:"仅自己可见此收藏集"})]})]})})]})})})}},56663:(e,n,t)=>{t.d(n,{Z:()=>C});t(42931);var a=t(83107),r=(t(11266),t(47933)),s=(t(37796),t(24044)),i=t(4942),l=(t(34935),t(71577)),o=t(15861),c=t(29439),d=t(64687),u=t.n(d),p=t(67294),f=t(80411),m=t.n(f),x=t(74317),v=t(19674),h=t(95717),b=t(20555),j=t(49058);const g={clickNoSelectText:"index__clickNoSelectText--v1dDv",titleWrap:"index__titleWrap--hNAUj",submit:"index__submit--iebTr",darkTitleWrap:"index__darkTitleWrap--syfkM",addIcon:"index__addIcon--Jz3pK",title:"index__title--xPTnD",createContent:"index__createContent--Tozmw",name:"index__name--nBKMq",desc:"index__desc--T0oBu",radio:"index__radio--j0pMz",infoText:"index__infoText--pzhiy",info:"index__info--HYNge",dark:"index__dark--GK_Rx"};var k=t(85893);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const C=function(e){var n=e.visible,t=e.onCancel,i=e.showCollection,d=e.getAddRes,f=e.collectInfo,y=void 0===f?null:f,C=e.updateCollection,_=e.hideCollectModel,Z=e.onCheckedItem,N=e.themeMode,O=(0,p.useState)(""),I=(0,c.Z)(O,2),P=I[0],S=I[1],T=(0,p.useState)(""),A=(0,c.Z)(T,2),D=A[0],R=A[1],V=(0,p.useState)(1),W=(0,c.Z)(V,2),M=W[0],U=W[1],z=(0,v.Z)().userInfoStore.getUserInfo;(0,p.useEffect)((function(){null!=y&&y.name&&n&&S(null==y?void 0:y.name),null!=y&&y.desc&&n&&R(null==y?void 0:y.desc),null!=y&&y.status&&n&&U(null==y?void 0:y.status)}),[y,n]);var E=function(){var e=(0,o.Z)(u().mark((function e(){var n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=b.wg,e.next=3,h.BL({name:P,desc:D,status:M,userId:null==z?void 0:z.userId});case 3:e.t1=e.sent,(n=(0,e.t0)(e.t1)).success?((0,b.Vp)(n.message),i&&i(),d&&d(n.data),Z&&Z(null==n||null===(a=n.data)||void 0===a?void 0:a.id),t()):(0,b.vU)(n.message);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){S(""),R(""),U(1)},K=function(){var e=(0,o.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=y&&y.id){e.next=2;break}return e.abrupt("return");case 2:return e.t0=b.wg,e.next=5,h.Rm({name:P,desc:D,status:M,userId:null==z?void 0:z.userId,id:null==y?void 0:y.id});case 5:e.t1=e.sent,(n=(0,e.t0)(e.t1)).success?((0,b.Vp)(n.message),C&&C({name:P,desc:D,status:M,id:null==y?void 0:y.id}),t()):(0,b.vU)(n.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=(0,k.jsxs)("div",{className:m()(g.titleWrap,"dark"===N&&g.darkTitleWrap),children:[(0,k.jsx)("div",{onClick:function(){return t()},children:(0,k.jsx)(x.Z,{name:"icon-arrow-left-bold",className:g.addIcon,noStopPropagation:!0})}),(0,k.jsx)("div",{className:g.title,children:"新建收藏集"}),(0,k.jsx)(l.Z,{type:"link",onClick:function(){null!=z&&z.userId&&(null!=y&&y.id?K():E(),G(),t&&t())},className:g.submit,disabled:!P,children:"完成"})]});return(0,k.jsx)("div",{className:g.CreateDrawer,children:(0,k.jsx)(a.Z,{title:L,placement:"bottom",closable:!1,onClose:function(){G(),t(),_||i&&i()},visible:n,height:427,headerStyle:"dark"===N?w(w({},j.ju.headerStyle),{},{padding:"10px",borderRadius:"0"}):{padding:"10px"},bodyStyle:"dark"===N?w(w({},j.ju.bodyStyle),{},{padding:"0 10px"}):{padding:"0 10px"},maskStyle:"dark"===N?w({},j.ju.maskStyle):{},children:(0,k.jsxs)("div",{className:m()(g.createContent,"dark"===N&&g.dark),children:[(0,k.jsx)(s.Z,{className:g.name,placeholder:"请输入收藏集名称",maxLength:20,bordered:!1,value:P,onChange:function(e){S(e.target.value)}}),(0,k.jsx)(s.Z.TextArea,{showCount:!0,autoSize:{minRows:2},maxLength:100,className:g.desc,placeholder:"请输入收藏集描述",bordered:!1,value:D,onChange:function(e){R(e.target.value)}}),(0,k.jsxs)(r.ZP.Group,{className:g.radioGroup,onChange:function(e){U(e.target.value)},value:M,children:[(0,k.jsxs)(r.ZP,{value:1,className:g.radio,children:[(0,k.jsx)("span",{className:g.infoText,children:"公开"}),(0,k.jsx)("span",{className:g.info,children:"当其他人关注此收藏集后不可再更改为隐私"})]}),(0,k.jsxs)(r.ZP,{value:2,children:[(0,k.jsx)("span",{className:g.infoText,children:"隐私"}),(0,k.jsx)("span",{className:g.info,children:"仅自己可见此收藏集"})]})]})]})})})}}}]);